<ng-container *ngIf="game; else waitingForGame">

  <div [ngSwitch]="game.state">
    <div *ngSwitchCase="GameState.WAITING_FOR_PLAYERS">

      <ng-container *ngIf="notJoined; else waitingForMorePlayers">

        <!-- <button (click)="restart()">Restart</button> -->
        <div>
          <input [(ngModel)]="playerName" type="text">
          <button (click)="join()">Beitreten</button>
        </div>

      </ng-container>
    </div>

    <div *ngSwitchCase="GameState.READY">
      <button (click)="start()">Start</button>
      <div *ngIf="false; else score"></div>
    </div>

    <div *ngSwitchCase="GameState.PLAYING">

      <div *ngIf="false; else score"></div>

    </div>
  </div>

  <dab-board (clickLine)="onClickLine($event)" [board]="game.board" [disabled]="boardDisabled"
    [player0Turn]="playerTurn(0)" [player1Turn]="playerTurn(1)"></dab-board>

</ng-container>

<ng-template #score>
  <div class="score">

    <div class="score-card player-1" [class.active]="game.currentPlayer === 0">
      <div>{{ game.players[0]?.name }}</div>
      <span>{{ game.countBoxesOwnedBy[0] }}</span>
    </div>

    <div class="score-card player-2" [class.active]="game.currentPlayer === 1">
      <div>{{ game.players[1]?.name }}</div>
      <span>{{ game.countBoxesOwnedBy[1] }}</span>
    </div>
  </div>
</ng-template>

<ng-template #waitingForGame>
  <div>Verbinde zum game server...</div>
</ng-template>

<ng-template #waitingForMorePlayers>
  <div>Warte auf noch mehr Spieler</div>
</ng-template>

<ng-template #gameReady>

  <div class="hud">
    <div class="hud-player" [class.hud-player1]="currentPlayer === 0">{{game.players[0]?.name}}
      <span> - {{countBoxesOwnedBy(0)}}</span>
    </div>
    <div class="hud-player" [class.hud-player2]="currentPlayer === 1">{{game.players[1]?.name}}
      <span> - {{countBoxesOwnedBy(1)}}</span>
    </div>

    <div *ngIf="game.winners.length" class="hud-winner">WINNER:

      <ng-container *ngFor="let winner of game.winners">
        {{game.players[winner].name}}
      </ng-container>

    </div>

  </div>

  <pre>PL: {{gameService.currentPlayer?.name}}</pre>


</ng-template>